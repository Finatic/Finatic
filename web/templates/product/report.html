{%extends 'base.html'%}
{%block title %}
Portfolio Report
{%endblock%}
{%block content %}
{%load static%}

<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
</head>

<body>

    <h2 class="text-info h1-responsive  font-weight-bold pb-2">Report</h2>
    <br>
    <div id="table_div"></div>
    <br>
    <div>
        <p> Current Value = {{Current_Value}} </p>
        <p> Invested Value = {{Invested_value}} </p>
        <p> Profit / Loss = {{Profit_loss}} </p>
    </div>
    <canvas id="myChart" width="1600" height="900"></canvas>

</body>

<!---------------------------Pie Chart---------------------------------------------->
<script>
    var sect = [[]];
    var sect = JSON.parse("{{sector|escapejs}}");
    console.log(sect)
    var data = {
        datasets: [{
            backgroundColor: ['#85884e', '#1abbde', '#fffe2b', '#345de3', '#0033da', '#5ca06d', '#27fa3a', '#07d58f', '#ee2d80', '#5bc0de'],
            data: sect['1']
        }],

        // These labels appear in the legend and in the tooltips when hovering different arcs
        labels: sect['2']
    };
    var ctx = document.getElementById("myChart");
    var myPieChart = new Chart(ctx, {
        type: 'pie',
        data: data,
        //options: options
    });
</script>

<!---------------------------Stat Table--------------------------------------------->
<script type="text/javascript">
    google.charts.load('current', { 'packages': ['table'] });
    google.charts.setOnLoadCallback(drawTable);

    function drawTable() {
        var arr = [[]];
        var arr = JSON.parse("{{paradict|escapejs}}");
        var data = new google.visualization.DataTable();

        data.addColumn('string', 'Company');
        data.addColumn('number', 'Quantity');
        data.addColumn('number', 'Buy Price');
        data.addColumn('number', 'Current Price');
        data.addColumn('number', 'Buy Value');
        data.addColumn('number', 'Current Value');
        data.addColumn('number', 'Profit / Loss');
        data.addColumn('number', 'Weightage');

        data.addRows(
            arr['1'],
        );

        var table = new google.visualization.Table(document.getElementById('table_div'));

        table.draw(data, { showRowNumber: true, width: '100%', height: '100%' });
    }
</script>
{%endblock%}